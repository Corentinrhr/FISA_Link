services:
  django-web:
    image: python:3.11-bullseye
    container_name: django-web
    ports:
      - "8800:8800" 
    volumes:
      - /home/corentinrhr/django-site:/app
    environment:
      - DEBUG=1
    networks:
      network-bd:
        ipv4_address: 172.255.0.100 
    command: >
      bash -c "
        chmod +x /app/run_web.sh &&
        /app/run_web.sh
      "

  django-api:
    image: python:3.11-bullseye
    container_name: django-api
    ports:
      - "8801:8801"
    volumes:
      - /home/corentinrhr/django-site:/app  
    environment:
      - DEBUG=1
    networks:
      network-bd:
        ipv4_address: 172.255.0.101
    command: >
      bash -c "
        chmod +x /app/run_api.sh &&
        /app/run_api.sh
      "

networks:
  network-bd:
    external: true
    driver: bridge
    ipam:
      config:
        - subnet: 172.255.0.0/24
